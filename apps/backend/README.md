# Backend Environment Management

This document outlines the setup and management of the different environments for the backend application.

## Environments

There are three primary environments:

-   **`development`**: For local development.
-   **`test`**: For running automated tests, both locally and in the CI/CD pipeline.
-   **`production`**: For the live application.

Each environment is configured using a corresponding `.env` file:

-   `.env.development`
-   `.env.test`
-   `.env.production` (This file is generated by the CI/CD pipeline and should not be committed to the repository)

### Scripts

The `package.json` provides scripts to run the application in different environments:

-   `npm run start:dev`: Starts the application in development mode with `nodemon` for automatic restarts.
-   `npm run start:test:local`: Starts the application using the test environment configuration.
-   `npm run test`: Runs the Jest test suite using the test environment.
-   `npm run start:prod`: Starts the application in production mode. This is primarily for local testing of the production build.

### Database Migrations

-   `npm run db:migrate:dev`: Runs database migrations for the development environment.
-   `npm run db:migrate:prod`: Runs database migrations for the production environment. This is used in the CI/CD pipeline.

### CI/CD Pipeline

The CI/CD pipeline in `.github/workflows/ci-cd-pipeline.yml` is configured to:

1.  Run `e2e-tests` using the `test` environment.
2.  Deploy to the production server, which involves:
    -   Generating a `.env.production` file from GitHub secrets.
    -   Running production database migrations.
    -   Starting the application using PM2.